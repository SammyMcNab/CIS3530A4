<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Project Details</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="create_account_page">
    <h1>{{ project[1] }} (Dept: {{ project[2] }}, No: {{ project[0] }})</h1>
    
    <!-- Gets and shows messages using flash.-->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <ul class="flashes">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}

    <!-- Displays a table with the assigned employees associated with that particular project (on this current webpage) -->
    <h2>Assigned Employees:</h2>

    <table class="table table--alt">
        <thead>
            <tr>
                <!-- Displays the SSN, Employee name and hours for the table-->
                <th>Ssn</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Hours</th>
            </tr>
        </thead>
        <tbody>
            <!-- For each assigned employee in the total list of assigned employees -->
            {% for assignment in assignments %}
            <tr>
                <td>{{ assignment[0] }}</td>
                <td>{{ assignment[1] }}</td>
                <td>{{ assignment[2] }}</td>
                <td>{{ assignment[3] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- For the Upsert Hours Form -->
    <br><hr><br>
    <h2>Add/Update Hours:</h2>
    <form method="POST">
    <br>
        <div style="display: flex; justify-content: center; align-items: center;">
            <label for="employee_id" style="text-align: center; color: white; font-size: 20px; font-weight: bold;">Select Employee:</label>
        </div>
        <div class="filter-section-projects">
            <br>
            <!-- To select a specific employee -->
            <select name="employee_id" id="employee_id" class="dropdown">
                {% for emp in employees %}
                <option value="{{ emp[0] }}">{{ emp[1] }} {{ emp[2] }}</option>
                {% endfor %}
            </select>
        </div>

        <div style="display: flex; justify-content: center; align-items: center;">
            <label for="hours" style="text-align: center; color: white; font-size: 20px; font-weight: bold;">Hours:</label>
        </div>

        <!-- Lets users type a specific number of total hours -->
        <input type="number" step="0.1" name="hours" id="hours" min="0">

        <!-- Update button -->
        <br>
        <p>
            <a onclick="event.preventDefault(); this.closest('form').submit();" class="button">Update</a>
        </p>
    </form>

    {% if message %}
    <!-- Displays the message -->
    <p>{{ message }}</p>
    {% endif %}

    <!-- Goes back to the projects.html page -->
    <hr><br>
    <p>
        <a href="{{ url_for('main.projects') }}" class="button">Back to Projects Portfolio Summary</a>
    </p>
</body>
</html>
